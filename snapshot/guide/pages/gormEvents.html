<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3.4 Events from GORM unspecified</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Async
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/promises.html"><strong>2</strong><span>Promises</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/events.html"><strong>3</strong><span>Events</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/asyncGorm.html"><strong>4</strong><span>Asynchronous GORM</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/rxjava.html"><strong>5</strong><span>RxJava Support</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/asyncRequests.html"><strong>6</strong><span>Asynchronous Request Handling</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/asyncServletApi.html"><strong>7</strong><span>Servlet 3.0 Async</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/promises.html">&lt;&lt; <strong>2</strong><span>Promises</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/asyncGorm.html"><strong>4</strong><span>Asynchronous GORM</span> >></a></div>
                


                <div class="project">
                    <h1>3.4 Events from GORM</h1>

                    <p><strong>Version:</strong> unspecified</p>
                </div>

                

                

<h2 id="gormEvents">3.4 Events from GORM</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-async/edit/master/src/main/docs/guide/events/gormEvents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>GORM defines a <a href="http://grails.github.io/grails-data-mapping/latest/api/org/grails/datastore/mapping/engine/event/package-summary.html">number of useful events</a> that you can listen for.</p>
</div>
<div class="paragraph">
<p>The events are disabled by default as they add overhead and impact performance for read operations in GORM, however if this is not an issue for you then you can enable them with the following configuration in <code>grails-app/conf/application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">grails</span>:
    <span class="key">events</span>:
        <span class="key">spring</span>: <span class="string"><span class="content">true</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This instructs Grails to translate Spring events (which are what GORM events are published as) into events published to the <code>EventBus</code>.</p>
</div>
<div class="paragraph">
<p>Each event is published within the <code>gorm</code> namespace. You can listen for the events with a service as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">grails.events.annotation.*</span>
<span class="keyword">import</span> <span class="include">org.grails.datastore.mapping.engine.event.*</span>
...

<span class="annotation">@Events</span>(namespace=<span class="string"><span class="delimiter">&quot;</span><span class="content">gorm</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">MyService</span> {

    <span class="annotation">@Subscriber</span>
    <span class="type">void</span> preInsert(PreInsertEvent event) {
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">GOT EVENT </span><span class="inline"><span class="inline-delimiter">$</span>event</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These events are triggered asynchronously, and so cannot cancel or manipulate the persistence operations. If you want to do that see the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#eventsAutoTimestamping">Events &amp; Auto Timestamping</a> in the GORM docs
</td>
</tr>
</table>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/promises.html">&lt;&lt; <strong>2</strong><span>Promises</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/asyncGorm.html"><strong>4</strong><span>Asynchronous GORM</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
